<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitbucket PR Helper</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Bitbucket PR Helper</h1>
            <p class="subtitle">Generate AI-powered PR descriptions</p>
            <button id="options-btn" class="options-button" title="Open Settings">Options</button>
        </div>

        <div class="settings-selectors-container">
            <div class="popup-input-group">
                <label for="popup-template-select">Template:</label>
                <select id="popup-template-select" name="popup-template-select">
                    <option value="">-- Loading Templates --</option>
                </select>
            </div>

            <div class="popup-input-group">
                <label for="popup-llm-provider-select">LLM Provider:</label>
                <select id="popup-llm-provider-select" name="popup-llm-provider-select">
                    <option value="">-- Loading Providers --</option>
                </select>
            </div>

            <div class="popup-input-group">
                <label for="popup-llm-model-select">Model:</label>
                <select id="popup-llm-model-select" name="popup-llm-model-select">
                    <option value="">-- Select Provider First --</option>
                </select>
            </div>
        </div>
        
        <div class="form-section">
            <div class="input-group">
                <label for="bitbucket-token">Bitbucket OAuth Token:</label>
                <input 
                    type="password" 
                    id="bitbucket-token" 
                    placeholder="Paste your Bitbucket OAuth token here..."
                    class="token-input"
                >
                <small class="input-hint">Required for accessing your PR data</small>
            </div>
            
            <button id="generate-btn" class="generate-button" disabled>
                <span class="btn-text">Generate Description</span>
                <div class="loading-spinner" style="display: none;"></div>
            </button>
        </div>
        
        <div class="result-section">
            <label for="result-textarea">Generated Description:</label>
            <textarea 
                id="result-textarea" 
                placeholder="Generated PR description will appear here..."
                readonly
                class="result-textarea"
            ></textarea>
            
            <div class="action-buttons" style="display: none;">
                <button id="copy-btn" class="action-button secondary">
                    Copy to Clipboard
                </button>
                <button id="fill-btn" class="action-button primary">
                    Fill into Page
                </button>
            </div>
        </div>
        
        <div class="status-message" id="status-message"></div>
    </div>
    
    <script src="popup.js"></script>
</body>
</html>