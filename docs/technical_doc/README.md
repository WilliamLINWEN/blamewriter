# Bitbucket PR Description Generator - Browser Extension

## ðŸŒŸ å°ˆæ¡ˆæ¦‚è¿° (Project Overview)

æœ¬å°ˆæ¡ˆæ˜¯ä¸€å€‹ç€è¦½å™¨æ“´å……åŠŸèƒ½ï¼Œæ—¨åœ¨å°‡ AI èƒ½åŠ›ç›´æŽ¥åµŒå…¥ Bitbucketï¼Œè‡ªå‹•ç‚º Pull
Requests (PR) ç”Ÿæˆé«˜å“è³ªçš„æè¿°ã€‚ä½¿ç”¨è€…åœ¨ç€è¦½ Bitbucket
PR é é¢æ™‚ï¼Œå¯ä»¥ä¸€éµè§¸ç™¼æ­¤åŠŸèƒ½ï¼Œæ“´å……åŠŸèƒ½æœƒåˆ†æž PR çš„ç¨‹å¼ç¢¼è®Šæ›´ (diff)ï¼Œä¸¦é€éŽå¤§åž‹èªžè¨€æ¨¡åž‹ (LLM) ç”Ÿæˆçµæ§‹åŒ–çš„æè¿°æ–‡æœ¬ï¼Œæœ€çµ‚å°‡å…¶å¡«å…¥æè¿°æ¡†ã€‚

**æ ¸å¿ƒç›®æ¨™ (Core Goal):**
æ¶ˆé™¤é–‹ç™¼è€…åœ¨æ’°å¯« PR æè¿°æ™‚çš„ä¸Šä¸‹æ–‡åˆ‡æ›å’Œé‡è¤‡æ€§å·¥ä½œï¼Œå°‡æ•´å€‹æµç¨‹ç„¡ç¸«æ•´åˆåˆ° Bitbucket çš„åŽŸç”Ÿå·¥ä½œæµä¸­ï¼Œå¾žè€Œé¡¯è‘—æå‡é–‹ç™¼æ•ˆçŽ‡ã€‚

## ðŸš€ æŠ€è¡“æ£§ (Tech Stack)

æœ¬å°ˆæ¡ˆæŽ¡ç”¨ç¾ä»£åŒ–çš„ JavaScript å…¨æ£§è§£æ±ºæ–¹æ¡ˆï¼Œç¢ºä¿å‰å¾Œç«¯æŠ€è¡“çš„ä¸€è‡´æ€§èˆ‡é–‹ç™¼æ•ˆçŽ‡ã€‚

### **å‰ç«¯ (Browser Extension - `frontend`)**

- **èªžè¨€ (Language):** TypeScript

### **å¾Œç«¯ (Backend Service - `backend`)**

- **æ¡†æž¶ (Framework):** Node.js + Express.js
  - _ç†ç”±: æˆç†Ÿã€ç©©å®šä¸”è¼•é‡çš„å¾Œç«¯æ¡†æž¶ï¼Œæ“æœ‰é¾å¤§çš„ç”Ÿæ…‹ç³»çµ±ï¼Œèˆ‡å‰ç«¯ JavaScript æŠ€è¡“æ£§ç„¡ç¸«å°æŽ¥ã€‚_
- **èªžè¨€ (Language):** TypeScript
  - _ç†ç”±: èˆ‡å‰ç«¯ä¿æŒä¸€è‡´ï¼Œæä¾›ç«¯åˆ°ç«¯çš„åž‹åˆ¥å®‰å…¨ã€‚_
- **LLM æ•´åˆ (LLM Integration):** LangChain.js
  - _ç†ç”±: æ¨™æº–åŒ–èˆ‡å¤šå€‹ LLM æä¾›å•† (OpenAI, Anthropic,
    Ollama ç­‰) çš„äº’å‹•ï¼Œä¸¦æä¾›å¼·å¤§çš„å·¥å…·éˆ (å¦‚æ–‡æœ¬åˆ†å‰²ã€æç¤ºæ¨¡æ¿ã€éˆå¼èª¿ç”¨) ä¾†è™•ç†è¤‡é›œçš„ AI ä»»å‹™ã€‚_
- **API é€šè¨Š (API Communication):** Axios
  - _ç†ç”±: å¼·å¤§ä¸”æ˜“æ–¼ä½¿ç”¨çš„ HTTP å®¢æˆ¶ç«¯ï¼Œç”¨æ–¼èˆ‡ Bitbucket
    API å’Œå…¶ä»–å¤–éƒ¨æœå‹™é€²è¡Œé€šè¨Šã€‚_

## ðŸ›ï¸ å°ˆæ¡ˆæž¶æ§‹ (Project Architecture)

æœ¬å°ˆæ¡ˆæŽ¡ç”¨å…¸åž‹çš„**å‰å¾Œç«¯åˆ†é›¢æž¶æ§‹**ï¼š

1.  **ç€è¦½å™¨æ“´å……åŠŸèƒ½ (Frontend):**

    - **è·è²¬:** ä½œç‚ºä½¿ç”¨è€…ä»‹é¢å±¤ï¼Œè² è²¬èˆ‡ä½¿ç”¨è€…äº’å‹•ã€‚
    - `Content Script`: æ³¨å…¥åˆ° Bitbucket é é¢ï¼Œè®€å–é é¢è³‡è¨Šä¸¦åµŒå…¥ UI å…ƒç´ ã€‚
    - `Popup Script`: æ“´å……åŠŸèƒ½å½ˆå‡ºè¦–çª—çš„ UIã€‚
    - `Options Page`: å®Œæ•´çš„è¨­å®šé é¢ï¼Œç”¨æ–¼ä½¿ç”¨è€…èªè­‰å’Œé…ç½®ã€‚
    - `Background Script`: ä½œç‚ºæ“´å……åŠŸèƒ½çš„å¤§è…¦ï¼Œè™•ç†æ ¸å¿ƒé‚è¼¯å’Œå°å¾Œç«¯ API çš„è«‹æ±‚ã€‚

2.  **å¾Œç«¯æœå‹™ (Backend):**
    - **è·è²¬:** ä½œç‚ºå®‰å…¨çš„æ¥­å‹™é‚è¼¯è™•ç†å±¤ã€‚
    - **API ä»£ç†:** ä»£ç†æ‰€æœ‰å° Bitbucket API å’Œ LLM
      API çš„è«‹æ±‚ï¼Œéš±è—æ•æ„Ÿçš„æ†‘è­‰ (å¦‚ App Secret, LLM API Keys)ã€‚
    - **èªè­‰è™•ç†:** è™•ç† Bitbucket OAuth 2.0 èªè­‰æµç¨‹ã€‚
    - **æ ¸å¿ƒ AI é‚è¼¯:**
      æŽ¥æ”¶å‰ç«¯å‚³ä¾†çš„ PR è³‡è¨Šï¼Œç²å– diffï¼Œä½¿ç”¨ LangChain.js é€²è¡Œåˆ†å¡Šã€æ‘˜è¦ (Map-Reduce)ï¼Œä¸¦èª¿ç”¨ LLM ç”Ÿæˆæœ€çµ‚æè¿°ã€‚

### **å·¥ä½œæµç¨‹ç¤ºæ„åœ– (Workflow Diagram)**

```
[User on Bitbucket] -> [Content Script / Popup UI] -> [Background Script] -> [Backend API]
                                                                              |
                                        +-------------------------------------+
                                        | 1. Call Bitbucket API (get diff)
                                        | 2. Process diff with LangChain.js (Map-Reduce)
                                        | 3. Call LLM API (generate description)
                                        +-------------------------------------+
                                                                              |
                                        <-------------------------------------+ [Returns Description]
```

## ðŸ› ï¸ å¦‚ä½•é–‹å§‹é–‹ç™¼ (Getting Started)

1.  **é€²å…¥å¾Œç«¯ç›®éŒ„:** `cd backend`
    - å®‰è£ä¾è³´: `npm install`
    - è¨­å®šç’°å¢ƒè®Šæ•¸: è¤‡è£½ `.env.example` ç‚º `.env` ä¸¦å¡«å…¥å¿…è¦çš„ API é‡‘é‘°ã€‚
    - å•Ÿå‹•å¾Œç«¯æœå‹™: `npm run dev`
2.  **é€²å…¥å‰ç«¯ç›®éŒ„:** `cd ../frontend`
    - å®‰è£ä¾è³´: `npm install`
    - å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨: `npm run dev`
    - åœ¨ç€è¦½å™¨ä¸­è¼‰å…¥æœªå°è£çš„æ“´å……åŠŸèƒ½ï¼ŒæŒ‡å‘ `frontend/dist` ç›®éŒ„ã€‚
